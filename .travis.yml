sudo: true
language: cpp
os:
 - linux
         
before_script:
  ./tools/travis/cibuild.before.sh
script:
  ./tools/travis/cibuild.sh

#second we exclude those that are redundant, don't make sense or take too long
matrix:
  include:
    - env: ENABLE_STYLE_TESTING=ON WITH_GUI=ON
      os: linux
      compiler: gcc
## gcc tests class and TOPP tests (if we run into a time limit, we can split it)
## PP Wavelet is turned off due to unstable behavior ... 
    - env: ENABLE_STYLE_TESTING=OFF ENABLE_TOPP_TESTING=ON ENABLE_CLASS_TESTING=ON WITH_GUI=ON DISABLE_PPWAVELET3=ON ADDRESS_SANITIZER=Off
      os: linux
      compiler: gcc
## clang tests class and TOPP tests: with gui and address sanitizer
    - env: ENABLE_STYLE_TESTING=OFF WITH_GUI=OFF ENABLE_TOPP_TESTING=ON ENABLE_CLASS_TESTING=ON DISABLE_PPWAVELET3=ON ADDRESS_SANITIZER=On
      os: linux
      compiler: clang
## clang tests class and TOPP tests: without gui and without address sanitizer
    - env: ENABLE_STYLE_TESTING=OFF WITH_GUI=ON ENABLE_TOPP_TESTING=ON ENABLE_CLASS_TESTING=ON DISABLE_PPWAVELET3=OFF ADDRESS_SANITIZER=Off
      os: linux
      compiler: clang

## OS X tests
#    - env: ENABLE_STYLE_TESTING=OFF WITH_GUI=OFF ENABLE_TOPP_TESTING=ON ENABLE_CLASS_TESTING=ON DISABLE_PPWAVELET3=OFF ADDRESS_SANITIZER=Off
#      os: osx
#      compiler: clang
